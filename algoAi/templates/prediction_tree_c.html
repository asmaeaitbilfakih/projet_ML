{% include "includes/header.html" %}
{% load static %}

<div class="container">
    <h2 class="mb-4">Caractéristiques du Logement</h2>
    <div class="ps-2 card">
        <div class="card-title">
            <img src="{% static 'images/maison_1.png' %}" class="image-redimensionnee" >
        </div>

        <div class="card-body">
            <form method="post" action="{% url 'decision_tree_prediction' %}" class="ps-4 pe-4 pt-4 pb-4">
                {% csrf_token %}

                <!-- SECTION LOCALISATION -->
                <h5 class="mt-4 mb-3 text-primary">Localisation</h5>

                <div class="mb-4">
                    <label for="lat" class="form-label">Latitude</label>
                    <input type="range" class="form-range" min="52.30" max="52.45" step="0.0001" 
                           id="lat" name="lat" value="52.37">
                    <span class="slider-value" id="latValue">52.37</span>
                </div>

                <div class="mb-4">
                    <label for="lng" class="form-label">Longitude</label>
                    <input type="range" class="form-range" min="4.80" max="5.10" step="0.0001" 
                           id="lng" name="lng" value="4.90">
                    <span class="slider-value" id="lngValue">4.90</span>
                </div>

                <!-- SECTION LOGEMENT -->
                <h5 class="mt-4 mb-3 text-success">Caractéristiques du logement</h5>

                <div class="mb-4">
                    <label for="person_capacity" class="form-label">Capacité (personnes)</label>
                    <input type="range" class="form-range" min="1" max="6" step="1"
                           id="person_capacity" name="person_capacity" value="2">
                    <span class="slider-value" id="person_capacityValue">2</span>
                </div>

                <div class="mb-4">
                    <label for="bedrooms" class="form-label">Nombre de chambres</label>
                    <input type="range" class="form-range" min="1" max="4" step="1"
                           id="bedrooms" name="bedrooms" value="1">
                    <span class="slider-value" id="bedroomsValue">1</span>
                </div>

                <div class="mb-4">
                    <label for="center_dist" class="form-label">Distance du centre (km)</label>
                    <input type="range" class="form-range" min="0" max="10" step="0.1"
                           id="center_dist" name="center_dist" value="2">
                    <span class="slider-value" id="center_distValue">2</span>
                </div>

                <div class="mb-4">
                    <label for="metro_dist" class="form-label">Distance du métro (km)</label>
                    <input type="range" class="form-range" min="0" max="5" step="0.1"
                           id="metro_dist" name="metro_dist" value="1">
                    <span class="slider-value" id="metro_distValue">1</span>
                </div>

                <!-- SECTION SATISFACTION & ATTRACTIVITÉ -->
                <h5 class="mt-4 mb-3 text-warning">Satisfaction & Attractivité</h5>

                <div class="mb-4">
                    <label for="guest_satisfaction_overall" class="form-label">
                        Satisfaction des invités (%)
                    </label>
                    <input type="range" class="form-range" min="60" max="100" step="1"
                           id="guest_satisfaction_overall" name="guest_satisfaction_overall" value="90">
                    <span class="slider-value" id="guest_satisfaction_overallValue">90</span>
                </div>

                <div class="mb-4">
                    <label for="attr_index" class="form-label">Index d'attractivité</label>
                    <input type="range" class="form-range" min="10" max="700" step="5"
                           id="attr_index" name="attr_index" value="200">
                    <span class="slider-value" id="attr_indexValue">200</span>
                </div>


                <button type="submit" class="btn btn-primary col-12 mt-4">Prédire la recommandation</button>
            </form>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Liste de tous les sliders à gérer
        const sliders = [
            'lat', 'lng',
            'person_capacity', 'bedrooms', 'center_dist', 'metro_dist',
            'guest_satisfaction_overall', 'attr_index'
        ];

        // Initialiser chaque slider
        sliders.forEach(sliderId => {
            const slider = document.getElementById(sliderId);
            const valueDisplay = document.getElementById(sliderId + 'Value');
            
            if (slider && valueDisplay) {
                // Afficher la valeur initiale
                valueDisplay.textContent = slider.value;
                
                // Mettre à jour lors du déplacement
                slider.addEventListener('input', function() {
                    valueDisplay.textContent = this.value;
                });
            }
        });
    });
</script>

<style>
    .slider-value {
        margin-left: 10px;
        font-weight: bold;
        color: #0d6efd;
        background-color: #f8f9fa;
        padding: 2px 8px;
        border-radius: 4px;
        border: 1px solid #dee2e6;
        min-width: 60px;
        display: inline-block;
        text-align: center;
    }
    .image-redimensionnee {
        width: 100%;
        height: 300px;
        object-fit: cover;
        border-radius: 8px;
    }
    .form-range {
        width: 100%;
    }
    .card {
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        border: none;
        border-radius: 10px;
    }
    h5 {
        border-bottom: 2px solid;
        padding-bottom: 8px;
    }
    .form-label {
        font-weight: 500;
        margin-bottom: 8px;
    }
</style>

{% include "includes/footer.html" %}
